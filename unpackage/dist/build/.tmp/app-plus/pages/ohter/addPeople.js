(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/ohter/addPeople"],{6035:function(t,e,i){"use strict";i.r(e);var a=i("855c"),n=i.n(a);for(var o in a)"default"!==o&&function(t){i.d(e,t,function(){return a[t]})}(o);e["default"]=n.a},"65c2":function(t,e,i){"use strict";i.r(e);var a=i("f448"),n=i("6035");for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);i("8a5f");var s=i("2877"),d=Object(s["a"])(n["default"],a["a"],a["b"],!1,null,null,null);e["default"]=d.exports},"855c":function(t,e,i){"use strict";(function(t,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=o(i("a34a"));function o(t){return t&&t.__esModule?t:{default:t}}function s(t,e,i,a,n,o,s){try{var d=t[o](s),r=d.value}catch(c){return void i(c)}d.done?e(r):Promise.resolve(r).then(a,n)}function d(t){return function(){var e=this,i=arguments;return new Promise(function(a,n){var o=t.apply(e,i);function d(t){s(o,a,n,d,r,"next",t)}function r(t){s(o,a,n,d,r,"throw",t)}d(void 0)})}}var r=function(){return i.e("components/cmd-cell-item/cmd-cell-item").then(i.bind(null,"329f"))},c={components:{cmdCellItem:r},data:function(){return{state:0,addon:"请选择",list:[{name:"姓名",plac:"请输入同住人姓名",type:1,maxlength:4},{name:"手机号",plac:"请输入同住人电话",type:0,maxlength:11},{name:"身份证号",plac:"请输入同住人身份证号",type:1,maxlength:18}],data:[],editlist:[],cardImage:[],pic1:"../../static/other/upload_position.png",pic2:"../../static/other/upload_opposite.png",button:"保存",type:1,tabbar:!0,windowHeight:""}},onLoad:function(e){var i=this;if(t.getSystemInfo({success:function(t){i.windowHeight=t.windowHeight}}),t.onWindowResize(function(t){t.size.windowHeight<i.windowHeight?i.tabbar=!1:i.tabbar=!0}),e.index){t.setNavigationBarTitle({title:"编辑同住人"});var a=JSON.parse(e.index);this.addon=a.relation,this.editlist=a,this.data=[a.addName,a.mobilePhone,a.idCard],""!=a.idCardFront&&(this.pic1=a.idCardFront),""!=a.idCardBack&&(this.pic2=a.idCardBack),this.type=2}},methods:{getinit:function(){this.addon=this.editlist.relation;var t=[this.editlist.addName,this.editlist.mobilePhone,this.editlist.idCard];for(var e in this.list)this.data[e]=t[e]},goDetailPage:function(){var e=this,i=["配偶","父母","子女","祖父母","子孙女","兄弟姐妹","其它亲属","朋友","其它"];t.showActionSheet({itemList:i,success:function(t){e.addon=i[t.tapIndex]}})},chooseImg:function(e){var i=this;t.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["camera","album"],success:function(a){var n=a.tempFilePaths.map(function(t,e){return{name:"file",uri:t}});t.uploadFile({url:"http://192.168.1.32/picturesvr/upload",files:n,success:function(t){0==e?i.pic1=JSON.parse(t.data).data.obj:i.pic2=JSON.parse(t.data).data.obj}})}})},submit:function(){var e=d(n.default.mark(function e(){var i,o,s;return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(i="",o={},2==this.type?(i="/etenantsvr/fellow/resident/updateInfo",o={id:this.editlist.id,tenantId:this.$store.state.obj.id,addResidentId:this.$store.state.obj.identityNumber,fellowResidentName:this.$store.state.obj.tenant,residentId:this.data[2],relation:this.addon,addName:this.data[0],mobilePhone:this.data[1],idCard:this.data[2],idCardFront:this.pic1,idCardBack:this.pic2,delFlag:0}):(i="/etenantsvr/fellow/resident/insertInfo",o={tenantId:this.$store.state.obj.id,addResidentId:this.$store.state.obj.identityNumber,fellowResidentName:this.$store.state.obj.tenant,mobilePhone:this.data[1],idCard:this.data[2],idCardFront:"../../static/other/upload_position.png"==this.pic1?"":this.pic1,idCardBack:"../../static/other/upload_opposite.png"==this.pic2?"":this.pic2,relation:this.addon,residentId:this.data[2],addName:this.data[0],addMobilePhone:this.$store.state.obj.tenantPhone,addIdCard:this.$store.state.obj.identityNumber,addIdCardFront:this.$store.state.obj.idCardPhoto,addIdCardBack:this.$store.state.obj.idCardPhoto}),!(o.mobilePhone&&o.idCard&&o.addName&&"请选择"!=o.relation)){e.next=19;break}if(11==o.mobilePhone.length){e.next=8;break}t.showToast({title:"手机格式错误"}),e.next=17;break;case 8:if(18==o.idCard.length){e.next=12;break}t.showToast({title:"身份证格式不正确"}),e.next=17;break;case 12:return e.next=14,this.util.request({url:i,method:"post",data:o});case 14:s=e.sent,console.log(a(s," at pages\\ohter\\addPeople.vue:211")),"0"==s.code&&(1==this.type?t.showToast({title:"添加同住人成功"}):t.showToast({title:"编辑同住人成功"}),setTimeout(function(){t.navigateBack({delta:-1})},1500));case 17:e.next=20;break;case 19:t.showToast({title:"请输入完整信息"});case 20:case"end":return e.stop()}},e,this)}));function i(){return e.apply(this,arguments)}return i}()}};e.default=c}).call(this,i("6e42")["default"],i("0de9")["default"])},"8a5f":function(t,e,i){"use strict";var a=i("fa7b"),n=i.n(a);n.a},f448:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement;t._self._c},n=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return n})},fa7b:function(t,e,i){}},[["c1e3","common/runtime","common/vendor"]]]);