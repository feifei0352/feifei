(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{"061a":function(n,t,e){"use strict";(function(n,o){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(e("a34a"));function a(n){return n&&n.__esModule?n:{default:n}}function u(n,t,e,o,i,a,u){try{var s=n[a](u),r=s.value}catch(c){return void e(c)}s.done?t(r):Promise.resolve(r).then(o,i)}function s(n){return function(){var t=this,e=arguments;return new Promise(function(o,i){var a=n.apply(t,e);function s(n){u(a,o,i,s,r,"next",n)}function r(n){u(a,o,i,s,r,"throw",n)}s(void 0)})}}var r=function(){return e.e("components/uni-popup/uni-popup").then(e.bind(null,"75c8"))},c=function(){return e.e("components/uni-grid/uni-grid").then(e.bind(null,"830d"))},l=function(){return e.e("components/uni-badge/uni-badge").then(e.bind(null,"40c8"))},d={components:{uniGrid:c,uniPopup:r,uniBadge:l},data:function(){return{tenantId:this.$store.state.obj.id,list:[],type:"",apkUrl:"",content:"",versionCode:"1.0",news:"0"}},onLoad:function(){var t=this;n.getStorage({key:"login_info",success:function(e){e.data.id?(t.$store.commit("update",["isLogin",!0,"1","2","3"]),t.$store.commit("login",e.data)):n.reLaunch({url:"/pages/login/login"})},fail:function(){n.reLaunch({url:"/pages/login/login"})}})},onReady:function(){setTimeout(function(){console.log(o("start pulldown"," at pages\\index\\index.vue:94"))},1e3),n.startPullDownRefresh()},methods:{indexList:function(){var n=s(i.default.mark(function n(){var t,e;return i.default.wrap(function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,this.util.request({url:"/etenantsvr/homePage/indexList/",method:"post",data:{tenantId:this.$store.state.obj.id}});case 2:return t=n.sent,this.list=t.data.list,n.next=6,this.util.request({url:"/etenantsvr/homePage/unreadMessage",method:"post",data:{identityNumber:this.$store.state.obj.identityNumber}});case 6:e=n.sent,0==e.code&&(this.news=e.data.obj);case 8:case"end":return n.stop()}},n,this)}));function t(){return n.apply(this,arguments)}return t}(),AndroidCheckUpdate:function(){var t=s(i.default.mark(function t(){var e,a;return i.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.util.request({url:"/etenantsvr/version/queryVersionUpdateContent",method:"post",data:{}});case 2:if(e=t.sent,0!=e.code){t.next=14;break}if(!(e.data.obj.versionCode>this.versionCode)){t.next=14;break}if(this.content=e.data.obj.content,this.apkUrl=e.data.obj.apkUrl,console.log(o(e.data.obj.mustUpdate," at pages\\index\\index.vue:129")),"true"!=e.data.obj.mustUpdate){t.next=13;break}return n.showLoading({title:"正在更新，请稍后",mask:!0}),a=plus.downloader.createDownload(this.apkUrl,{},function(t,e){200==e?plus.runtime.install(plus.io.convertLocalFileSystemURL(t.filename),{},{},function(t){n.showToast({title:"更新失败！",mask:!1,icon:"none",duration:1500})}):n.showToast({title:"更新失败！",mask:!1,icon:"none",duration:1500})}),a.start(),t.abrupt("return",!1);case 13:n.getStorageSync("update")||(this.explain("explain"),n.setStorageSync("update","1"));case 14:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),onPullDownRefresh:function(){this.indexList();var t=this;setTimeout(function(){n.stopPullDownRefresh(),n.getSystemInfo({success:function(n){console.log(o(n.platform," at pages\\index\\index.vue:172")),"android"==n.platform&&t.AndroidCheckUpdate()}})},1e3)},download:function(){n.showToast({title:"新版本下载完成后将自动弹出安装程序。",mask:!1,duration:5e3,icon:"none"}),this.explain("");var t=plus.downloader.createDownload(this.apkUrl,{},function(t,e){200==e?plus.runtime.install(plus.io.convertLocalFileSystemURL(t.filename),{},{},function(t){n.showToast({title:"更新失败！",mask:!1,icon:"none",duration:1500})}):n.showToast({title:"更新失败！",mask:!1,icon:"none",duration:1500})});t.start()},explain:function(n){this.type=n},goService:function(t){0==t.index&&n.navigateTo({url:"../module/rentHouse",success:function(n){},fail:function(){},complete:function(){}}),1==t.index&&n.navigateTo({url:"/pages/module/landlord",success:function(n){},fail:function(){},complete:function(){}}),2==t.index&&n.navigateTo({url:"../module/contract",success:function(n){},fail:function(){},complete:function(){}}),3==t.index&&n.navigateTo({url:"/pages/module/rates?tenancyNum=".concat(this.list[0].tenancyNum),success:function(n){},fail:function(){},complete:function(){}}),4==t.index&&n.navigateTo({url:"/pages/module/pretendfriends",success:function(n){},fail:function(){},complete:function(){}})},rent:function(t,e){n.navigateTo({url:"/pages/detail/detail?id="+t+"&idcard="+this.$store.state.obj.identityNumber+"&tenancyNum="+e})},loadExecution:function(){try{var t=n.getStorageSync("launchFlag");t?1==t?n.switchTab({url:"/pages/index/index"}):n.redirectTo({url:"/pages/index/guide"}):(n.setStorage({key:"launchFlag",data:!0,success:function(){console.log(o("存储launchFlag"," at pages\\index\\index.vue:284"))}}),n.redirectTo({url:"/pages/index/guide"}))}catch(e){n.setStorage({key:"launchFlag",data:!0,success:function(){console.log(o("error时存储launchFlag"," at pages\\index\\index.vue:297"))}}),n.redirectTo({url:"/pages/index/guide"})}}}};t.default=d}).call(this,e("6e42")["default"],e("0de9")["default"])},6914:function(n,t,e){"use strict";e.r(t);var o=e("8362"),i=e("7838");for(var a in i)"default"!==a&&function(n){e.d(t,n,function(){return i[n]})}(a);e("7fa0");var u=e("2877"),s=Object(u["a"])(i["default"],o["a"],o["b"],!1,null,null,null);t["default"]=s.exports},7838:function(n,t,e){"use strict";e.r(t);var o=e("061a"),i=e.n(o);for(var a in o)"default"!==a&&function(n){e.d(t,n,function(){return o[n]})}(a);t["default"]=i.a},"7fa0":function(n,t,e){"use strict";var o=e("bfab"),i=e.n(o);i.a},8362:function(n,t,e){"use strict";var o=function(){var n=this,t=n.$createElement;n._self._c},i=[];e.d(t,"a",function(){return o}),e.d(t,"b",function(){return i})},bfab:function(n,t,e){}},[["b574","common/runtime","common/vendor"]]]);